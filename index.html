<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoteMate++</title>
    <style>
        body { margin:0; font-family: Arial, sans-serif; display:flex; height:100vh; background:#f0f2f5; overflow: hidden; }
        
        /* Sidebar */
        .sidebar { width:220px; background:#004aad; color:white; padding:20px 10px; display: flex; flex-direction: column; gap: 10px; }
        .sidebar div { padding:15px; border-radius:8px; cursor:pointer; background:#005be0; text-align:center; font-size:16px; transition: 0.3s; }
        .sidebar div:hover { background:#0077ff; transform: translateX(5px); }
        
        /* Main Content */
        .main { flex:1; padding:20px; display: flex; justify-content: center; align-items: start; }
        .record-box { background:#fff; padding:30px; width:60%; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        .audio-list { margin-top:20px; padding:10px; background:#f8f9fa; border-radius:8px; max-height:300px; overflow-y:auto; text-align: left; }
        .record-btn { background:#ff4757; color:white; padding:12px 30px; border:none; border-radius:25px; cursor:pointer; font-size: 16px; font-weight: bold; transition: 0.2s; }
        .record-btn:active { transform: scale(0.95); }
        .record-btn.recording { background: #2ed573; }

        /* Popups */
        .popup { width:350px; height:450px; position:fixed; background:white; border-radius:12px; box-shadow:0 0 20px rgba(0,0,0,0.2); right:20px; bottom:20px; display:none; flex-direction:column; z-index: 1000; overflow: hidden; }
        .popup header { background:#007bff; color:white; padding:12px; cursor:move; text-align:center; font-weight: bold; user-select: none; }
        .messages { flex:1; padding:15px; overflow-y:auto; font-size:14px; background: #f1f1f1; display: flex; flex-direction: column; gap: 8px; }
        
        /* Message Bubbles */
        .messages div { max-width: 80%; padding: 8px 12px; border-radius: 10px; word-wrap: break-word; }
        .msg-user { align-self: flex-end; background: #007bff; color: white; }
        .msg-bot, .msg-other { align-self: flex-start; background: white; border: 1px solid #ddd; color: #333; }

        .input-area { display:flex; padding:10px; background: white; border-top: 1px solid #eee; }
        .input-area input { flex:1; padding:10px; border:1px solid #ccc; border-radius:20px; outline: none; }
        .input-area button { margin-left:8px; background:#007bff; border:none; color:white; padding:8px 15px; border-radius:20px; cursor:pointer; }
        .input-area button:hover { background: #0056b3; }

        /* Note Popup specifically */
        #notePopup { width:400px; height:300px; left:50%; top:50%; transform:translate(-50%, -50%); right: auto; bottom: auto; }
        #notePopup textarea { flex:1; margin:10px; resize:none; padding:10px; border: 1px solid #ddd; border-radius:8px; outline: none; }

        /* Name Modal */
        #nameOverlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); z-index: 2000; display: flex; justify-content: center; align-items: center; }
        #nameBox { background: white; padding: 25px; border-radius: 12px; text-align: center; width: 300px; }
    </style>
</head>
<body>

    <div id="nameOverlay">
        <div id="nameBox">
            <h3>Nh·∫≠p t√™n c·ªßa b·∫°n</h3>
            <input id="nameInput" placeholder="T√™n hi·ªÉn th·ªã..." style="width:90%; padding:10px; border-radius:8px; border: 1px solid #ccc; margin-bottom:15px;">
            <button onclick="saveName()" style="padding:10px 30px; background:#007bff; color:white; border:none; border-radius:8px; cursor:pointer;">X√°c nh·∫≠n</button>
        </div>
    </div>

    <div class="sidebar">
        <div onclick="togglePopup('notePopup')">üìù Ghi ch√∫</div>
        <div onclick="togglePopup('chatPopup')">ü§ñ Chatbot AI</div>
        <div onclick="togglePopup('groupChatPopup')">üåç C·ªông ƒë·ªìng</div>
    </div>

    <div class="main">
        <div class="record-box">
            <h2>üéôÔ∏è Ghi √¢m NoteMate</h2>
            <button class="record-btn" id="recordBtn">B·∫Øt ƒë·∫ßu ghi</button>
            <div class="audio-list" id="audioList"></div>
        </div>
    </div>

    <div id="chatPopup" class="popup">
        <header>Chatbot AI</header>
        <div id="botMessages" class="messages"></div>
        <div class="input-area">
            <input id="botInput" placeholder="H·ªèi g√¨ ƒë√≥..." onkeypress="handleEnter(event, sendBotMessage)"/>
            <button onclick="sendBotMessage()">G·ª≠i</button>
        </div>
    </div>

    <div id="groupChatPopup" class="popup">
        <header>C·ªông ƒë·ªìng chung</header>
        <div id="groupMessages" class="messages"></div>
        <div class="input-area">
            <input id="groupInput" placeholder="Chat v·ªõi m·ªçi ng∆∞·ªùi..." onkeypress="handleEnter(event, sendGroupMessage)"/>
            <button onclick="sendGroupMessage()">G·ª≠i</button>
        </div>
    </div>
